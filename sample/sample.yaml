#!../output/bin/main --config

vhost:
  - name: "first"
    endpoint: ':18080'
    read_timeout: 10
    write_timeout: 10
    max_header_size: 100000

    service:
      - name: "concate"
        tag: "simpel concate services"
        router: 
          path: "/impl/concate"
          method:
              - "GET"

        max_session_size: 500
        policy: !inc_string "lib/concate.pl"

      - name: "body_sign"
        tag: !eval "str::to_upper('a very simple service')"

        router: 
          path: "/impl/body-sign/{op}/{method}"
          method:
              - "POST"

        max_session_size: 500

        policy: !inc_string "lib/body_sign.pl"

      - name: "null"
        tag: !env "PATH"
        router: 
          path: "/impl/concate"
          method:
            - "GET"

        max_session_size: 100

        policy: !inc_string "lib/null.pl"

      - name: "null"
        tag: "basic proxy"
        router: 
          path: "/impl/null/*"
          method:
            - "GET"

        config:
          a: "bb"
          c: "dd"

        max_session_size: 500

        policy: !inc_string "lib/proxy.pl"
